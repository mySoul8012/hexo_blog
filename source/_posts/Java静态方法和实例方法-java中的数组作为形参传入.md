title: Java静态方法和实例方法  java中的数组作为形参传入
author: Ming ming
tags: []
categories:
  - 后端
  - Java
date: 2018-10-11 01:13:00
---
Java静态方法和实例方法  java中的数组作为形参传入
# Java虚拟机
启动一个Java程序的时候，会诞生一个虚拟机实例，当程序关闭退出时，该实例会消失。
如果一个机器上运行着三个Java程序，即有三个Java虚拟机实例
Java虚拟机会调用某个初始类的main()方法运行一个Java程序，此方法将会作为程序的初始线程启动，任何线程都是由主线程启动的。
## 守护线程和非守护线程
Java虚拟机有两种线程，守护线程和非守护线程。
例如垃圾收集任务的线程，属于守护线程。
> Java可以将创建的任何线程定义为守护线程

main为非守护线程，当虚拟机中的所有非守护线程终止的时候，虚拟机实例将会自动退出。
## 类加载器
用于加载class文件中的类
## 运行数据区
分为本地方法区，堆，栈，寄存器，本地方法栈
### 方法区
被称为静态区，和堆一样，会被所有线程共享。方法区会包含静态的class和static变量
> 在java虚拟机启动的时候会被装载

### 堆
储存对象，即new出的实例，会在堆中储存。
会被所有线程共享，不存放基本类型和对象引用。
> 对象中会有一个指向方法区的指针，用来把堆中new出的对象和方法区的类和静态变量连接起来

堆有两个部分，一个句柄池，一个对象池。
#### 句柄池
句柄池有两部分，一个指向对象变量的指针
```
a e = new a()
```
其中，储存的是执行对象变量的指针，即指向栈中e的变量的地址

还有一部分是指向方法区中的指针
即指向方法区中类a的指针
#### 对象锁
虚拟机中每个对象都有一个对象锁，用于协调多个线程访问同一个对象时的同步
#### 关于数组
在Java中和js一个样子
数组即对象，对象即数组
数组是储存在堆中的
所以，在调用方法的时候传入数组即传入了对象，这个时候（由于java中只有一个堆，用来储存对象）在方法中对数组的操作，即操作了堆中对象的操作。
> 和栈不同，属于直接引用了堆中的地址，属于引用而不是开辟了一块新的储存空间。即一个指针，指向其堆中数组的地址

### 栈
每次启动一个新线程的时候，Java虚拟机会为其其分配一个栈。
Java虚拟机只执行出栈和压栈的操作。
某个线程执行的方法称为该线程的当前方法，当前方法使用的栈帧属于当前帧。当前方法属于的类称为当前类，当前类的常量池称为当前常量池。
每个线程调用一个Java的方法的时候，会在该线程的Java栈中压入一个新栈，这个新栈称为当前帧，这个帧用来储存一些非静态变量的内容。
当方法调用完成以后，会弹出帧，销毁内容
> 关于方法调用传入数组和变量的的区别，数组，是一个对象，指向堆中的一块储存地址，变量，属于当前方法帧中的方法栈，调用的时候会直接压栈，调用完成以后会执行出栈操作。所以传入变量不会保存，传入数组会保存更改

Java栈上的数据所有数据是此线程私有的。不能被其他线程共享
> 堆 会被共享，方法区会被共享

# 静态方法和实例方法
静态方法会在程序运行的时候直接装载进入方法区。而实例方法会在new的时候以对象的方法装载进入堆中。
最大的区别在于内存的区别，由于main函数为static静态方法，会直接在运行的时候装载进入内存区，实例方法必须new，在堆中创建内存区域。再进行引用。